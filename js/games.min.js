jQuery(function(n){function i(e,a){return 0!==(a=n.param(a)).length?-1===e.indexOf("?")?e+"?"+a:e+"&"+a:e}var e=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");e=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))},a=e("name"),t=e("region"),r=e("order"),l=e("compat"),e=e("genre"),o={};a&&(o.name=a),t&&(o.region=t),r&&(o.order=r),l&&(o.compat=l),e&&(o.genre=e),a&&n('input[name="name"]').val(a),n('[data-filter="compat"] [data-compat]').each(function(){var e=n(this);e.data("compat")==l&&e.addClass("active");var a=Object.assign({},o);delete a.compat,e.attr("href",i(e.attr("href"),a))}),n('[data-filter="region"]').val(t||""),n('[data-filter="region"]').change(function(){var e=Object.assign({},o);""!==this.value?e.region=this.value:delete e.region,document.location=i(n(this).data("href"),e)}),n(".navbar-search").submit(function(e){var a=n(this),t=Object.assign({},o);t.name=this.elements.name.value,""===t.name&&delete t.name,delete t.compat,delete t.region,document.location=i(a.attr("action"),t),e.preventDefault()}),n(".filter-expand").click(function(){n(this.nextElementSibling).toggleClass("filter-hidden")}),l||n('[data-filter="compat"]').addClass("filter-hidden"),t||n('[data-filter="region"]').addClass("filter-hidden")});