jQuery(function(n){function e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))}function r(e,a){var t=n.param(a);return 0!==t.length?-1===e.indexOf("?")?e+"?"+t:e+"&"+t:e}var a=e("name"),t=e("region"),i=e("order"),l=e("compat"),o=e("genre"),c={};a&&(c.name=a),t&&(c.region=t),i&&(c.order=i),l&&(c.compat=l),o&&(c.genre=o),a&&n('input[name="name"]').val(a),n('[data-filter="compat"] [data-compat]').each(function(){var e=n(this);e.data("compat")==l&&e.addClass("active");var a=Object.assign({},c);delete a.compat,e.attr("href",r(e.attr("href"),a))}),n('[data-filter="region"]').val(t||""),n('[data-filter="region"]').change(function(){var e=Object.assign({},c);""!==this.value?e.region=this.value:delete e.region,document.location=r(n(this).data("href"),e)}),n(".navbar-search").submit(function(e){var a=n(this),t=Object.assign({},c);t.name=this.elements.name.value,""===t.name&&delete t.name,delete t.compat,delete t.region,document.location=r(a.attr("action"),t),e.preventDefault()}),n(".filter-expand").click(function(){n(this.nextElementSibling).toggleClass("filter-hidden")}),l||n('[data-filter="compat"]').addClass("filter-hidden"),t||n('[data-filter="region"]').addClass("filter-hidden")});